/*!
 * videojs-playlists - Playlists done right for Videojs
 * v0.1.1
 * 
 * copyright Antonio Laguna 2013
 * MIT License
*/
function playList(e,o){var t=this;t.pl=t.pl||{};var p=parseInt(e,10);return t.pl._guessVideoType=function(e){return{webm:"video/webm",mp4:"video/mp4",ogv:"video/ogg"}[e.split(".").pop()]||""},t.pl.init=function(e,o){o=o||{},t.pl.videos=[],t.pl.current=0,t.on("ended",t.pl._videoEnd),o.getVideoSource&&(t.pl.getVideoSource=o.getVideoSource),t.pl._addVideos(e)},t.pl._updatePoster=function(e){t.poster(e),t.removeChild(t.posterImage),t.posterImage=t.addChild("posterImage")},t.pl._addVideos=function(e){for(var o=0,p=e.length;o<p;o++){for(var i=[],r=0,l=e[o].src.length;r<l;r++)i.push({type:t.pl._guessVideoType(e[o].src[r]),src:e[o].src[r]});e[o].src=i,t.pl.videos.push(e[o])}},t.pl._nextPrev=function(e){var o,p;if("next"===e?(o=t.pl.videos.length-1,p=1):(o=0,p=-1),t.pl.current!==o){var i=t.pl.current+p;t.pl._setVideo(i),t.trigger(e,[t.pl.videos[i]])}},t.pl._setVideo=function(e){e<t.pl.videos.length&&(t.pl.current=e,t.pl.currentVideo=t.pl.videos[e],t.paused()||t.pl._resumeVideo(),t.pl.getVideoSource?t.pl.getVideoSource(t.pl.videos[e],(function(e,o){t.pl._setVideoSource(e,o)})):t.pl._setVideoSource(t.pl.videos[e].src,t.pl.videos[e].poster))},t.pl._setVideoSource=function(e,o){t.src(e),t.pl._updatePoster(o)},t.pl._resumeVideo=function(){t.one("loadstart",(function(){t.play()}))},t.pl._videoEnd=function(){t.pl.current===t.pl.videos.length-1?t.trigger("lastVideoEnded"):(t.pl._resumeVideo(),t.next())},e instanceof Array?(t.pl.init(e,o),t.pl._setVideo(0),t):p==p?(t.pl._setVideo(p),t):"string"==typeof e&&void 0!==t.pl[e]?(t.pl[e].apply(t),t):void 0}videojs.Player.prototype.next=function(){return this.pl._nextPrev("next"),this},videojs.Player.prototype.prev=function(){return this.pl._nextPrev("prev"),this},videojs.plugin("playList",playList);